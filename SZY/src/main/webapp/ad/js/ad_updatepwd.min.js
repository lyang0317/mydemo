var _upOldPwd=$("#J_upOldPwd"),_upPwd=$("#J_upPwd"),_upPwdSure=$("#J_upPwdSure"),_upVerification=$("#J_upVerification"),_errorOldPwd=$("#J_errorOldPwd"),_errorPwd=$("#J_errorPwd"),_errorPwdSure=$("#J_errorPwdSure"),_errorVerification=$("#J_errorVerification");
$(function(){getUserInfo();new vfCode("J_vfCodeImg","J_vfCodeChange","updatepwd_ad");});var REGCHECK={OLDPWD:{FOCUS:function(){_errorOldPwd.addClass("none");
},BLUR:function(b){var a=$.trim(b);if(!RE.NULL.test(a)){return false;}if(!/^[A-Za-z0-9]{6,20}$/.test(a)){_errorOldPwd.removeClass("none").html("密码由6到20个字符组成");
}}},PWD:{FOCUS:function(){_errorPwd.addClass("none");},BLUR:function(b){var a=$.trim(b);if(!RE.NULL.test(a)){$("#J_userPwdLen").addClass("none");$("#J_userPwdLay").css({width:"0px"});
return false;}if(!/^[A-Za-z0-9]{6,20}$/.test(a)){_errorPwd.removeClass("none").html("密码由6到20个字符组成");}},KEYUP:function(d){var b=$.trim(d),c=b.length,a=null;
if(!RE.NULL.test(b)){return false;}if(c>5){$("#J_userPwdLen").removeClass("none");a=checkStrong(b);$("#J_userPwdLay").animate({width:100*a+"px"},"slow");
}else{$("#J_userPwdLen").addClass("none");$("#J_userPwdLay").css({width:"0px"});}}},PWDSURE:{FOCUS:function(){_errorPwdSure.addClass("none");},BLUR:function(c){var a=$.trim(c),b=$.trim(_upPwd.val());
if(!RE.NULL.test(a)){return false;}if(b!=a){_errorPwdSure.removeClass("none").html("两次输入的密码不一致");}}},VF:{FOCUS:function(){_errorVerification.addClass("none");
},BLUR:function(b){var a=$.trim(b);if(!RE.NULL.test(a)){return false;}if(!/^[a-zA-Z0-9]{6}$/.test(a)){_errorVerification.removeClass("none").html("验证码不正确");
}}}};function submitUpdatePwd(){var e=$.trim(_upOldPwd.val()),c=$.trim(_upPwd.val()),d=$.trim(_upPwdSure.val()),b=$.trim(_upVerification.val()),f=$("#J_upPwdId").val(),a=$("#J_errorUpPwd");
if(!RE.NULL.test(e)){_errorOldPwd.removeClass("none").html("请填写旧密码");return false;}else{if(!/^[A-Za-z0-9]{6,20}$/.test(e)){_errorOldPwd.removeClass("none").html("登录密码由6到20个字符组成");
return false;}}if(!RE.NULL.test(c)){_errorPwd.removeClass("none").html("请填写新密码");return false;}else{if(!/^[A-Za-z0-9]{6,20}$/.test(c)){_errorPwd.removeClass("none").html("登录密码由6到20个字符组成");
return false;}}if(c!=d){_errorPwdSure.removeClass("none").html("两次输入的密码不一致");return false;}if(!RE.NULL.test(b)){_errorVerification.removeClass("none").html("请输入验证码");
return false;}else{if(!/^[a-zA-Z0-9]{6}$/.test(b)){_errorVerification.removeClass("none").html("验证码不正确");return false;}}$.ajax({url:AJAXURL.updatePwd,data:{oldpwd:e,newpwd:c,input:b,captcha:"updatepwd_ad"},type:"POST",dataType:"JSON",success:function(g){if(g.state){location.href="updatepwdrlt";
}else{if(g.msg==null){a.removeClass("none").html("数据异常，请稍后再试");new vfCode("J_vfCodeImg","J_vfCodeChange","updatepwd_ad");}else{a.removeClass("none").html(g.msg);
new vfCode("J_vfCodeImg","J_vfCodeChange","updatepwd_ad");}}},error:function(){a.removeClass("none").html("链接异常，请稍后再试");}});}function getUserInfo(){var b=$("#J_upPwdEmail"),a=$("#J_upPwdUserName"),c=$("#J_upPwdId");
$.ajax({url:AJAXURL.getAdminInfo,type:"POST",dataType:"JSON",success:function(e){var d=e.data;if(e.state){b.html(d.email);a.html(d.realname);c.val(d.userid);
}},error:function(){}});}function checkStrong(b){var a=0;if(/\d/.test(b)){a++;}if(/[a-z]/.test(b)){a++;}if(/[A-Z]/.test(b)){a++;}return a;}