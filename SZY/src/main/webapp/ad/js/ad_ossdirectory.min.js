$(function(){var c=location.search;if(c&&c!=""&&c!=null){var b=getSearchAsArray(c);if(b.user_email){var d=b.user_email;var a=b.dirUrl;getNextFile(d,a);
}else{alert("请求参数错误");location.href="ossed";}}else{alert("请求参数错误");location.href="ossed";}});function getNextFile(b,a){var c={};if(a){c={type:"user",email:b,dirUrl:a};
}else{c={type:"user",email:b};}$.ajax({url:AJAXURL.getNextFile,data:c,type:"POST",dataType:"JSON",success:function(d){if(d.state){$("#J_fileListBody").html(createFileListHtml(d.data));
}else{ALERT.init({info:"数据异常，请稍后再试！"});}},error:function(){ALERT.init({info:"链接异常，请稍后再试！"});}});}function createFileListHtml(e){if(e){var d=[],a=e.length;
if(a>0){for(var c=0;c<a;c++){var b=e[c];d.push("<tr>");d.push('<td><i class="icon '+getIconClassName(b.type)+'"></i><a class="link" href="'+getFileHref(b.type,b.dirUrl)+'">'+b.file+"</a></td>");
d.push("<td>"+b.size+"</td>");d.push("<td>"+b.type+"</td>");d.push("<td>"+b.ctime+"</td>");d.push("</tr>");}}else{d.push('<tr><td colspan="4">没有查找到相关条件的结果</td></tr>');
}return d.join("");}}function getIconClassName(b){var a="";switch(b){case"文档":a=" no";break;case"--":a=" no";break;case"文件夹":a=" file";break;case"图片":a=" img";
break;case"rar":a=" rar";break;case"MP4":a=" movie";break;}return a;}function getFileHref(c,b){var a=location.href;if(c=="文件夹"){a+="&dirUrl="+b;}else{a="javascript:;";
}return a;}