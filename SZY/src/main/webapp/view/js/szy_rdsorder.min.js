var RDS_AJAX_DATA={size:7,number:1,pay_state:-1,check_state:-1,type:-1,order_num:"",account_email:"",account_name:""};$(function(){getAllOrder();});function getAllOrder(a){$("#J_comPage").html("");
if(a){RDS_AJAX_DATA.number=a;}var b=$("#J_rdsTbBody");$.ajax({url:AJAXURL.getAllOrder,data:RDS_AJAX_DATA,type:"POST",dataType:"JSON",beforeSend:function(){b.html('<i class="load-one">拼命加载中...</i>');
},success:function(c){if(c.state){b.html(createOrderListHtml(c.data.list));if(c.data.list.length>0){new PAGE("J_comPage",RDS_AJAX_DATA.number,c.data.totalPage,getAllOrder);
}}else{b.html('数据异常，请稍后<a href="javascript:;" onclick="location.reload();return false;">重试</a>');}},error:function(){b.html('数据链接异常，请稍后<a href="javascript:;" onclick="location.reload();return false;">重试</a>');
}});}function createOrderListHtml(f){if(f){var d=[],b=f.length;if(b>0){for(var c=0;c<b;c++){var a=f[c],e=getOrderType(a.type),h=getPayStateName(a.pay_state);
d.push('<div class="panel-list panel panel-default">');d.push('<div class="panel-heading">');d.push('<h3 class="pull-left panel-title">订单号：<span>'+a.order_num+'</span>  <a class="more" href="rdsorderdetail?orderid='+a.order_num+'" target="_blank" title="详情>>">详情>></a></h3>');
d.push("</div>");d.push('<div class="panel-body">');d.push('<table class="tb-bd table" width="100%">');d.push("<tr>");d.push('<td width="18%">'+a.space_name+"</td>");
d.push('<td width="22%"><div class="line">'+a.account_email+"</div></td>");d.push('<td width="15%"><div class="line">'+a.date+"</div></td>");d.push('<td width="10%"><div class="line">'+e+"</div></td>");
d.push('<td width="10%"><div class="line">'+h+"</div></td>");d.push('<td width="10%"><div class="line price">￥'+a.price+"</div></td>");d.push('<td><div class="line">');
if(a.check_state==0){d.push('<a href="javascript:;" onclick="denyOrder(\''+a.order_num+"');return false;\">取消</a>");}else{var g=getOrderCheckState(a.check_state);
d.push(g);}d.push("</div></td>");d.push("</tr>");d.push("</table>");d.push("</div>");d.push("</div>");}}else{d.push('<div class="tc mt20">没有查找到相关条件的结果</div>');
}return d.join("");}}function orderStateChange(a){RDS_AJAX_DATA.pay_state=a;getAllOrder();}function orderCheckChange(a){RDS_AJAX_DATA.check_state=a;getAllOrder();
}function denyOrder(a){if(a){ALERT.init({info:"确定拒绝吗？",callback:function(){$.ajax({url:AJAXURL.refuseOrder,data:{order_num:a},type:"POST",dataType:"JSON",success:function(b){if(b.state){location.reload();
}else{alert("操作失败，请稍后再试");}},error:function(){alert("数据链接异常，请稍后再试");}});}});}}